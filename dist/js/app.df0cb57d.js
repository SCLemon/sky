(function(){"use strict";var t={1604:function(t,e,s){var a=s(2856),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},l=[],o={name:"App",mounted(){this.$bus.$on("handleAlert",this.handleAlert)},computed:{},methods:{handleAlert(t,e,s){this.$notify({title:t,message:e,type:s})}}},r=o,n=s(1656),c=(0,n.A)(r,i,l,!1,null,null,null),d=c.exports,u=s(1594),m=s(5462),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"body"},[e("div",{staticClass:"menu"},[e("Menu")],1),e("div",{staticClass:"view"},[e("transition",{attrs:{name:"slide-fade"}},[e("router-view")],1)],1)])},p=[],f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"menu"},[e("div",{class:{user:!0,list_selected:t.$route.path.includes("/login")||t.$route.path.includes("Info")},on:{click:function(e){t.isLogin?t.goTo(`/academic/${t.userInfo.typeEng}Info`):t.goTo("/academic/login")}}},[e("div",{staticClass:"img_block",on:{click:function(e){return e.stopPropagation(),t.openImgUpload()}}},[e("img",{staticClass:"img",attrs:{src:t.userInfo.userImgUrl?t.userInfo.userImgUrl:"img/user.png",alt:""}}),e("div",{staticClass:"img_upload"},[t._v("變更頭像 "),e("input",{ref:"img_upload_file",staticClass:"img_upload_file",attrs:{type:"file",accept:"image/*"},on:{change:function(e){return t.uploadUserImg()}}})])]),e("div",{class:"username "+(t.isLogin?"username_login":"")},[t._v(" "+t._s(t.isLogin?`${t.userInfo.name}`:"登入/註冊")+" "),e("div",[t._v("(職稱："+t._s(t.userInfo.type)+")")])])]),e("div",{class:{list:!0,list_lock:!t.isLogin,list_selected:t.$route.path.includes("/post")},on:{click:function(e){return t.goTo("/academic/post")}}},[t.isLogin?t._e():e("i",{staticClass:"fa-solid fa-lock lock"}),t._v("平台公告")]),e("div",{class:{list:!0,list_lock:!t.isLogin,list_selected:t.$route.path.includes("/learn")||t.$route.path.includes("/class")},on:{click:function(e){t.isLogin&&t.goTo("/academic/learn")}}},[t.isLogin?t._e():e("i",{staticClass:"fa-solid fa-lock lock"}),t._v("課程列表")]),t.isLogin?e("div",{class:{list:!0},on:{click:function(e){return t.logout()}}},[t._v("登出系統")]):t._e(),e("div",{staticClass:"footer"},[e("img",{staticClass:"footer_img",attrs:{src:"img/horizontal_logo_white.png",alt:""},on:{click:function(e){return t.goTo("/")}}})])])},v=[],g=(s(4114),s(417)),_={name:"Menu",data(){return{isLogin:!1,userInfo:{account:"",name:"",userImgUrl:"",typeEng:"",type:""}}},mounted(){this.$bus.$on("setUserInfo",this.setUserInfo),this.$bus.$on("updateCurrentUser",this.updateCurrentUser)},methods:{openImgUpload(){let t=this.$refs["img_upload_file"];t.click()},async uploadUserImg(){try{const t=m.A.get("authToken");let e=this.$refs["img_upload_file"],s=e.files[0];if(!s)return;await this.$confirm("確認修改頭貼?","提示",{confirmButtonText:"確認",cancelButtonText:"取消",type:"warning"});let a=new FormData;a.append("attachments",s);const i=await g.A.post("/api/userInfo/updateIcon",a,{headers:{"Content-Type":"multipart/form-data","x-user-token":t}});"success"==i.data.type?(this.updateCurrentUser(),this.$bus.$emit("handleAlert","頭像上傳通知",i.data.message,i.data.type)):this.$bus.$emit("handleAlert","頭像上傳通知",i.data.message,i.data.type)}catch(t){console.log(t)}finally{this.$refs["img_upload_file"].value=""}},async updateCurrentUser(){const t=m.A.get("authToken"),e=await g.A.post("/login/token",{save:!0},{headers:{"x-user-token":t}});"success"==e.data.type&&(this.$bus.$currentUser=e.data.userInfo,this.setUserInfo())},goTo(t){this.$router.push(t).catch((t=>{}))},setUserInfo(){const t=this.$bus.$currentUser;t&&(this.isLogin=!0),t.userImgUrl+=`?${(new Date).getTime()}`,this.userInfo=t},logout(){this.$confirm("確認是否登出系統?","提示",{confirmButtonText:"登出",cancelButtonText:"取消",type:"warning"}).then((()=>{m.A.remove("authToken"),this.isLogin=!1,this.$bus.$currentUser={},this.userInfo={},this.$bus.$emit("handleAlert","登出訊息","登出成功！","success"),this.$router.replace("/academic/login")})).catch((()=>{}))}}},b=_,y=(0,n.A)(b,f,v,!1,null,"1d8f2bb4",null),C=y.exports,x={name:"Academic",components:{Menu:C},data(){return{text:""}},mounted(){this.checkToken()},methods:{async checkToken(){const t=m.A.get("authToken");if(!t)return;const e=await g.A.post("/login/token",{save:!0},{headers:{"x-user-token":t}});"success"==e.data.type?(this.$bus.$currentUser=e.data.userInfo,this.$bus.$emit("setUserInfo")):(m.A.remove("authToken"),this.$bus.$currentUser={},this.$bus.$emit("handleAlert","使用者權限異常通知",e.data.message,e.data.type))}}},w=x,k=(0,n.A)(w,h,p,!1,null,"19b20367",null),$=k.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"header"},[t._v("課程儀表板")]),t.courseList.length?e("div",{staticClass:"classList"},t._l(t.courseList,(function(s,a){return e("div",{key:a,staticClass:"classItem",on:{click:function(e){return t.goToClass(s.idx)}}},[e("div",{staticClass:"banner"},[e("el-carousel",{staticClass:"carousel",attrs:{width:"100%",height:"175px",autoplay:!1}},t._l(s.bannerImg,(function(t,s){return e("el-carousel-item",{key:s},[e("img",{staticClass:"bannerImg",attrs:{src:t.url,alt:"",loading:"lazy"}})])})),1)],1),e("div",{staticClass:"className"},[t._v(t._s(s.courseName))]),e("div",{staticClass:"classNum"},[t._v(t._s(s.courseId))]),e("div",{staticClass:"lecturer"},[t._v(t._s(s.lecturer))])])})),0):e("div",{staticClass:"classList_empty"},[e("el-empty",{attrs:{description:"暫無課程"}})],1)])},A=[],I={name:"Learn",data(){return{text:"",courseList:[]}},mounted(){this.getCourse()},methods:{async getCourse(){const t=m.A.get("authToken");if(!t)return;const e=await g.A.get("/api/learn/getCourse",{headers:{"x-user-token":t}}),s=e.data;"success"==s.type?this.courseList=s.courses:this.$bus.$emit("handleAlert","課程資料查詢通知",e.data.message,e.data.type)},goToClass(t){this.$router.push({path:"class",query:{idx:t}}).catch((t=>{}))}}},L=I,S=(0,n.A)(L,T,A,!1,null,"06da0526",null),U=S.exports,D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"videoBox"},[t.showMaterial?e("div",{staticClass:"video"},[e("iframe",{attrs:{width:"860",height:"483.75",src:t.currentMaterial.videoSrc,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:""}}),e("div",{staticClass:"title"},[t._v(t._s(t.currentMaterial.title))]),e("div",{staticClass:"abstract"},[t._v(t._s(t.currentMaterial.abstract))]),e("div",{staticClass:"attachmentBox"},[t._v(" 教材檔案下載： "),e("a",{staticClass:"downloadLink",attrs:{href:t.currentMaterial.attachmentUrl}},[t._v("點擊下載")])])]):e("div",{staticClass:"video_empty"},[e("el-empty",{attrs:{description:"目前本課程暫無上課教材"}})],1),e("div",{staticClass:"videoList"},[e("div",{staticClass:"videoList_title"},[e("div",[t._v("上課教材")]),"teacher"==t.currentUser.typeEng?e("div",{staticClass:"video_add_btn",on:{click:function(e){t.dialogTableVisible=!0}}},[e("el-button",{attrs:{type:"primary"}},[t._v("上傳"),e("i",{staticClass:"el-icon-upload el-icon--right"})])],1):t._e()]),e("div",{staticClass:"videoList_item_box"},t._l(t.material,(function(s,a){return e("div",{key:a,class:"videoList_item "+(t.selectedItem===s.idx?"videoList_item_checked":""),on:{click:function(e){return t.openMaterial(s)}}},[t._v(t._s(s.title)+" "),"teacher"==t.currentUser.typeEng?e("i",{staticClass:"fa-solid fa-pen pen",on:{click:function(e){return e.stopPropagation(),t.openModify(s)}}}):t._e(),"teacher"==t.currentUser.typeEng?e("i",{staticClass:"fa-solid fa-trash delete",on:{click:function(e){return t.deleteMaterial(s)}}}):t._e()])})),0)])]),e("el-dialog",{attrs:{title:"上傳教材",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[e("div",{staticClass:"uploadTitle"},[t._v("影片標題")]),e("el-input",{attrs:{placeholder:"請輸入影片標題",clearable:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),e("div",{staticClass:"uploadTitle"},[t._v("影片簡介")]),e("el-input",{attrs:{placeholder:"請輸入影片簡介",clearable:""},model:{value:t.form.abstract,callback:function(e){t.$set(t.form,"abstract",e)},expression:"form.abstract"}}),e("div",{staticClass:"uploadTitle"},[t._v("影片連結")]),e("el-input",{attrs:{placeholder:"請先將影片上傳至 Youtube 並設置為不公開，而後將內嵌 <iframe> 中的 src 貼至此處。",clearable:""},model:{value:t.form.videoSrc,callback:function(e){t.$set(t.form,"videoSrc",e)},expression:"form.videoSrc"}}),e("div",{staticClass:"uploadTitle"},[t._v("教材上傳")]),e("el-upload",{staticClass:"upload-demo",attrs:{action:"#","auto-upload":!1,drag:"",multiple:"","on-change":t.handleChange,"file-list":t.form.fileList,accept:"application/*, image/*"}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("將文件拖到此處，或"),e("em",[t._v("點擊上傳")])])]),e("el-button",{staticClass:"materialBtn",attrs:{type:"primary",loading:t.addLoading},on:{click:function(e){return t.addMaterial()}}},[t._v("確認上傳教材")])],1),e("el-dialog",{attrs:{title:"更改教材",visible:t.dialogTableVisible2},on:{"update:visible":function(e){t.dialogTableVisible2=e}}},[e("div",{staticClass:"uploadTitle"},[t._v("影片標題")]),e("el-input",{attrs:{placeholder:"請輸入影片標題",clearable:""},model:{value:t.modifyForm.title,callback:function(e){t.$set(t.modifyForm,"title",e)},expression:"modifyForm.title"}}),e("div",{staticClass:"uploadTitle"},[t._v("影片簡介")]),e("el-input",{attrs:{placeholder:"請輸入影片簡介",clearable:""},model:{value:t.modifyForm.abstract,callback:function(e){t.$set(t.modifyForm,"abstract",e)},expression:"modifyForm.abstract"}}),e("div",{staticClass:"uploadTitle"},[t._v("影片連結")]),e("el-input",{attrs:{placeholder:"請先將影片上傳至 Youtube 並設置為不公開，而後將內嵌 <iframe> 中的 src 貼至此處。",clearable:""},model:{value:t.modifyForm.videoSrc,callback:function(e){t.$set(t.modifyForm,"videoSrc",e)},expression:"modifyForm.videoSrc"}}),e("div",{staticClass:"uploadTitle"},[t._v("教材上傳（更新須將原先上傳的檔案再次上傳）")]),e("el-upload",{staticClass:"upload-demo",attrs:{action:"#","auto-upload":!1,drag:"",multiple:"","on-change":t.handleChange2,"file-list":t.modifyForm.fileList,accept:"application/*, image/*"}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("將文件拖到此處，或"),e("em",[t._v("點擊上傳")])])]),e("el-button",{staticClass:"materialBtn",attrs:{type:"primary",loading:t.addLoading},on:{click:function(e){return t.modifyMaterial()}}},[t._v("更新上傳教材")])],1)],1)},F=[],M={name:"Class",data(){return{currentUser:{},courseIdx:this.$route.query.idx,selectedItem:null,material:[],showMaterial:!1,currentMaterial:{},addLoading:!1,dialogTableVisible:!1,form:{title:"",abstract:"",videoSrc:"",fileList:[]},modifyLoading:!1,dialogTableVisible2:!1,modifyForm:{materialIdx:"",title:"",abstract:"",videoSrc:"",fileList:[]}}},async mounted(){await this.getData(),this.currentUser=this.$bus.$currentUser},methods:{async getData(t){const e=m.A.get("authToken"),s=await g.A.get(`/api/learn/getCourserMaterial/${this.courseIdx}`,{headers:{"x-user-token":e}});"success"==s.data.type?(this.material=s.data.material,0==this.material.length?this.showMaterial=!1:("refresh"!=t&&(this.currentMaterial=this.material[0],this.selectedItem=this.currentMaterial.idx),this.showMaterial=!0)):this.$bus.$emit("handleAlert","課程教材獲取通知",s.data.message,s.data.type)},async addMaterial(){this.addLoading=!0;try{const t=m.A.get("authToken");let e=new FormData;e.append("idx",this.courseIdx),e.append("title",this.form.title),e.append("abstract",this.form.abstract),e.append("videoSrc",this.form.videoSrc),this.form.fileList&&this.form.fileList.forEach((t=>{e.append("attachments",t.raw)}));const s=await g.A.post("/api/learn/createMaterial",e,{headers:{"x-user-token":t}});"success"==s.data.type?(this.getData(),this.dialogTableVisible=!1,this.form={idx:"",title:"",abstract:"",videoSrc:"",fileList:[]},this.$bus.$emit("handleAlert","課程教材獲取通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","課程教材獲取通知",s.data.message,s.data.type)}catch(t){console.log(t)}finally{this.addLoading=!1}},async modifyMaterial(){this.modifyLoading=!0;try{const t=m.A.get("authToken");let e=new FormData;e.append("idx",this.courseIdx),e.append("materialIdx",this.modifyForm.materialIdx),e.append("title",this.modifyForm.title),e.append("abstract",this.modifyForm.abstract),e.append("videoSrc",this.modifyForm.videoSrc),this.modifyForm.fileList&&this.modifyForm.fileList.forEach((t=>{e.append("attachments",t.raw)}));const s=await g.A.post("/api/learn/modifyMaterial",e,{headers:{"x-user-token":t}});"success"==s.data.type?(this.getData("refresh"),this.dialogTableVisible2=!1,this.currentMaterial.title=this.modifyForm.title,this.currentMaterial.abstract=this.modifyForm.abstract,this.currentMaterial.videoSrc=this.modifyForm.videoSrc,this.modifyForm={idx:"",title:"",abstract:"",videoSrc:"",fileList:[]},this.$bus.$emit("handleAlert","課程教材更新通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","課程教材更新通知",s.data.message,s.data.type)}catch(t){console.log(t)}finally{this.modifyLoading=!1}},async deleteMaterial(t){try{await this.$confirm("確認是否刪除教材?","提示",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning"});const e=m.A.get("authToken"),s=await g.A.get(`/api/learn/deleteMaterial/${this.courseIdx}/${t.idx}`,{headers:{"x-user-token":e}});"success"==s.data.type?(this.getData(),this.$bus.$emit("handleAlert","課程教材刪除通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","課程教材刪除通知",s.data.message,s.data.type)}catch(e){}},async openModify(t){this.dialogTableVisible2=!0,this.modifyForm={materialIdx:t.idx,title:t.title,abstract:t.abstract,videoSrc:t.videoSrc}},handleChange(t,e){this.form.fileList=e},handleChange2(t,e){this.modifyForm.fileList=e},openMaterial(t){this.selectedItem=t.idx,this.currentMaterial=t}}},P=M,B=(0,n.A)(P,D,F,!1,null,"0a781c6e",null),V=B.exports,N=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"posterContainer"},[e("div",{staticClass:"posterBox"},["teacher"==t.currentUser.typeEng?e("div",{staticClass:"inputBox"},[e("div",{staticClass:"inputTextBox",on:{click:function(e){return t.openDialog("img")}}},[e("div",{staticClass:"inputTextBoxImg"},[e("img",{attrs:{src:t.currentUser.userImgUrl?t.currentUser.userImgUrl:"img/user.png",alt:""}})]),e("div",{staticClass:"textArea"},[t._v("發表您的貼文和公告")])]),e("div",{staticClass:"iconBox"},[e("div",{staticClass:"icon_item",on:{click:function(e){return t.openDialog("post")}}},[e("i",{staticClass:"fa-regular fa-pen-to-square icon"}),t._v(" 建立貼文 ")]),e("div",{staticClass:"icon_item",on:{click:function(e){return t.openDialog("img")}}},[e("i",{staticClass:"fa-regular fa-images icon"}),t._v(" 相片 / 影片 ")])])]):t._e(),t.posts.length?e("div",{ref:"postAll",class:"postAll "+("teacher"==t.currentUser.typeEng?"":"postAll_student"),on:{scroll:function(e){return t.postDivScroll()}}},t._l(t.posts,(function(s,a){return e("div",{key:a,staticClass:"post"},[t.showPermission?e("div",{staticClass:"post_more"},[e("el-dropdown",{on:{command:t.handleCommand}},[e("span",{staticClass:"el-dropdown-link"},[t._v(" 操作"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:{method:"modify",content:s.content,idx:s.idx}}},[t._v("編輯")]),e("el-dropdown-item",{attrs:{command:{method:"delete",idx:s.idx}}},[t._v("刪除")])],1)],1)],1):t._e(),e("div",{staticClass:"post_top"},[e("div",{staticClass:"post_top_img"},[e("img",{attrs:{src:s.creator.userImgUrl?s.creator.userImgUrl:"img/user.png",alt:""}})]),e("div",{staticClass:"post_top_detail"},[e("div",{staticClass:"post_top_name"},[t._v(t._s(s.creator.name))]),e("div",{staticClass:"post_top_date"},[t._v(t._s(s.createTime))])])]),""!=s.content.trim()?e("div",{staticClass:"post_text",domProps:{innerHTML:t._s(s.content)}}):t._e(),s.postImg.length?e("div",{staticClass:"post_img"},[e("el-carousel",{attrs:{height:"300px",autoplay:!1,loop:!1}},t._l(s.postImg,(function(t,s){return e("el-carousel-item",{key:s},[e("div",{staticClass:"carousel_img"},[e("img",{attrs:{src:t.url,alt:""}})])])})),1)],1):t._e(),e("div",{staticClass:"post_footer"},[e("div",{staticClass:"post_option_box"},[e("div",{class:"post_option "+(s.isLike?"like":""),on:{click:function(e){return t.toggleLikePost(s.idx,e)}}},[e("i",{class:"fa-regular fa-thumbs-up icon "+(s.isLike?"fa-solid":"")}),t._v(" "),e("span",[t._v(t._s(s.isLike?"收回讚":"按讚"))])]),e("div",{staticClass:"post_option",on:{click:function(e){return t.openUserMessageBox(e)}}},[e("i",{staticClass:"fa-regular fa-message icon"}),t._v(" 留言")])]),e("div",{staticClass:"userMessageBox"},[s.message.length?t._e():e("div",{staticClass:"userMessage",staticStyle:{"text-align":"center",color:"gray","font-size":"14px"}},[t._v("目前暫時沒有人留言")]),t._l(s.message,(function(s,a){return e("div",{key:a,staticClass:"userMessage"},[t._v(t._s(s.ip)+" 說："+t._s(s.message))])}))],2),e("div",{staticClass:"post_viewer_input_box"},[e("div",{staticClass:"viewer_inputTextBoxImg"},[e("img",{attrs:{src:t.currentUser.userImgUrl?t.currentUser.userImgUrl:"img/user.png",alt:""}})]),e("textarea",{staticClass:"viewer_textArea",attrs:{placeholder:"在此貼文下進行留言"}}),e("div",{staticClass:"viewer_send",on:{click:function(e){return t.sendUserMessage(s.idx,e)}}},[e("i",{staticClass:"fa-solid fa-feather"})])])])])})),0):e("div",{staticClass:"postAll postAll_empty"},[e("el-empty",{attrs:{description:"暫無貼文"}})],1)])]),e("div",{staticClass:"column"},[e("div",{staticClass:"daily"},[e("el-card",{staticClass:"daily_card",attrs:{shadow:"hover"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("每日練習")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.getDailyQuestion()}}},[t._v("隨機出題")])],1),e("div",{staticClass:"daily_content_all"},[e("div",{staticClass:"daily_content"},[e("div",{staticClass:"daily_question"},[t._v(t._s(t.dailyQuestion.question.question))]),e("div",{staticClass:"daily_options"},[t._v(t._s(t.dailyQuestion.question.options))])]),e("div",{staticClass:"statistic"},[e("div",{staticClass:"statistic_title"},[t._v("距離 "+t._s(t.dailyQuestion.title)+"：")]),e("div",{staticClass:"statistic_num"},[t._v(t._s(t.remainDay))]),e("div",{staticClass:"daily_answer"},[t._v(t._s(t.dailyQuestion.question.answer))])])])])],1),e("div",{staticClass:"todayCourse"},[e("div",{staticClass:"todayCourseTitle"},[t._v("今日課表")]),e("el-table",{staticStyle:{width:"90%"},attrs:{data:t.todayCourse,height:"282px",border:"","empty-text":"今日無課程"}},[e("el-table-column",{attrs:{prop:"startTime",label:"上課時間"}}),e("el-table-column",{attrs:{prop:"courseId",label:"課程代碼"}}),e("el-table-column",{attrs:{prop:"courseName",label:"課程名稱"}}),e("el-table-column",{attrs:{prop:"lecturer",label:"授課教師"}})],1)],1)]),t.showPermission?e("el-dialog",{attrs:{title:"建立貼文",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[e("div",{ref:"input",staticClass:"real_input",attrs:{contenteditable:"true"}}),e("el-upload",{attrs:{action:"#","auto-upload":!1,"list-type":"picture-card","on-change":t.handleUpload,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"file-list":t.form.attachments,multiple:!0,accept:"image/*"}},[e("i",{staticClass:"el-icon-plus"})]),e("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),e("el-button",{staticClass:"button",attrs:{type:"primary",loading:t.isSending},on:{click:function(e){return t.create()}}},[t._v("建立貼文")])],1):t._e(),t.showPermission?e("el-dialog",{attrs:{title:"修改貼文",visible:t.dialogTableVisible2},on:{"update:visible":function(e){t.dialogTableVisible2=e}}},[e("div",{ref:"modifyContent",staticClass:"real_input",attrs:{contenteditable:"true"}}),e("el-button",{staticClass:"button",attrs:{type:"primary",loading:t.isSending},on:{click:function(e){return t.modifyPost()}}},[t._v("修改貼文")])],1):t._e()],1)},E=[],O=s(2954),q={name:"Post",data(){return{currentUser:{},dailyQuestion:{title:"",deadline:"",question:{}},remainDay:0,todayCourse:[],form:{content:"",attachments:[]},isSending:!1,showPlaceholder:!0,dialogTableVisible:!1,sendEnabled:!1,inputKeyUpfunction:{},dialogImageUrl:"",dialogVisible:!1,posts:[],page:1,showPermission:!1,isLoadingMore:!1,modifyIdx:"",modifyContent:"",dialogTableVisible2:!1}},async mounted(){this.inputKeyUpfunction=window.addEventListener("keyup",(()=>{this.dialogTableVisible&&this.$refs.input&&""==this.$refs.input.innerText.trim()&&4==this.$refs.input.innerHTML.length&&(this.$refs.input.innerHTML="")})),await this.getPost(),await this.getUserInfo(),await this.getDailyQuestion(),await this.getTodayCourse(),this.currentUser=this.$bus.$currentUser},methods:{handleCommand(t){"delete"==t.method&&this.deletePost(t.idx),"modify"==t.method&&this.openModifyBox(t.content,t.idx)},async getDailyQuestion(){const t=await g.A.get("/api/post/getDailyQuestion",{headers:{"x-user-token":m.A.get("authToken")}});"success"==t.data.type?(this.remainDay=(0,O.c)(new Date(t.data.data.deadline),Date.now()),this.dailyQuestion=t.data.data):this.$bus.$emit("handleAlert","獲取每日一題通知",t.data.message,t.data.type)},async getTodayCourse(){const t=await g.A.get("/api/post/getTodayCourse",{headers:{"x-user-token":m.A.get("authToken")}});"success"==t.data.type?this.todayCourse=t.data.courses:this.$bus.$emit("handleAlert","獲取今日課程通知",t.data.message,t.data.type)},async getUserInfo(){const t=m.A.get("authToken");if(t)try{const e=await g.A.post("/login/token",{save:!1},{headers:{"x-user-token":t}});"success"==e.data.type&&(this.showPermission="teacher"==e.data.userInfo.typeEng)}catch(e){}},postDivScroll(){const t=this.$refs.postAll;t.scrollHeight-t.scrollTop===t.clientHeight&&this.getPost()},async getPost(t){if(!this.isLoading){this.isLoading=!0,"refresh"==t&&(this.posts=[],this.page=1);try{const t=await g.A.get(`/api/post/getPost?page=${this.page}`,{headers:{"x-user-token":m.A.get("authToken")}});"success"==t.data.type?(this.posts=this.posts.concat(t.data.posts),this.page++):this.$bus.$emit("handleAlert","貼文創建通知",t.data.message,t.data.type)}catch(e){}finally{this.isLoading=!1}}},async create(){this.isSending=!0,this.form.content=this.$refs.input.innerHTML;const t=new FormData;t.append("content",this.form.content),this.form.attachments&&this.form.attachments.length>0&&this.form.attachments.forEach(((e,s)=>{t.append("attachments",e.raw)}));const e=await g.A.post("/api/post/create",t,{headers:{"x-user-token":m.A.get("authToken")}});"success"==e.data.type?(this.getPost("refresh"),this.dialogTableVisible=!1,this.form={content:"",attachments:[]},this.$refs.input.innerHTML="",this.$bus.$emit("handleAlert","貼文創建通知",e.data.message,e.data.type)):this.$bus.$emit("handleAlert","貼文創建通知",e.data.message,e.data.type),this.isSending=!1},async deletePost(t){try{await this.$confirm("確認是否刪除貼文?","提示",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning"});const e=await g.A.delete(`/api/post/deletePost/${t}`,{headers:{"x-user-token":m.A.get("authToken")}});"success"==e.data.type?(this.getPost("refresh"),this.$bus.$emit("handleAlert","貼文刪除通知",e.data.message,e.data.type)):this.$bus.$emit("handleAlert","貼文刪除通知",e.data.message,e.data.type)}catch(e){}},async openModifyBox(t,e){this.dialogTableVisible2=!0,this.$nextTick((()=>{this.$refs["modifyContent"].innerHTML=t})),this.modifyIdx=e},async modifyPost(){try{this.modifyContent=this.$refs["modifyContent"].innerHTML;const t=await g.A.post(`/api/post/modifyPost/${this.modifyIdx}`,{content:this.modifyContent},{headers:{"x-user-token":m.A.get("authToken")}});"success"==t.data.type?(this.getPost("refresh"),this.dialogTableVisible2=!1,this.modifyContent="",this.modifyIdx="",this.$bus.$emit("handleAlert","貼文修改通知",t.data.message,t.data.type)):this.$bus.$emit("handleAlert","貼文修改通知",t.data.message,t.data.type)}catch(t){}},async toggleLikePost(t,e){const s=e.currentTarget,a=s.querySelector("i"),i=s.querySelector("span");try{const e=await g.A.get(`/api/post/toggleLikePost/${t}`,{headers:{"x-user-token":m.A.get("authToken")}});"success"==e.data.type?(s.classList.toggle("like"),a.classList.toggle("fa-solid"),"按讚"==i.innerText?i.innerText="收回讚":i.innerText="按讚"):this.$bus.$emit("handleAlert","貼文按讚通知",e.data.message,e.data.type)}catch(l){}},openDialog(){this.showPermission?this.dialogTableVisible=!0:this.$bus.$emit("handleAlert","創建貼文權限通知","目前平台並未開放學生進行貼文","warning")},handleUpload(t,e){this.form.attachments=e},handleRemove(t,e){this.form.attachments=e},handlePictureCardPreview(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},openUserMessageBox(t){const e=t.currentTarget,s=e.querySelector("i");s.classList.toggle("fa-solid");const a=e.closest(".post_option_box").nextElementSibling;a.classList.toggle("userMessageBox_open")},async sendUserMessage(t,e){try{const s=e.currentTarget,a=s.previousElementSibling,i=a.value,l=await g.A.post("/api/post/message",{postIdx:t,message:i},{headers:{"x-user-token":m.A.get("authToken")}});if("success"==l.data.type){const e=this.posts.find((e=>e.idx==t));e.message.push(l.data.data),a.value=""}else this.$bus.$emit("handleAlert","貼文留言通知",l.data.message,l.data.type)}catch(s){console.log(s)}}},beforeDestroy(){window.removeEventListener("keyup",this.inputKeyUpfunction)}},R=q,j=(0,n.A)(R,N,E,!1,null,"65bba6a0",null),z=j.exports,Q=function(){var t=this,e=t._self._c;return e("div",[t._v(" Practice ")])},H=[],K={name:"Practie",data(){return{text:""}},mounted(){}},Y=K,G=(0,n.A)(Y,Q,H,!1,null,"905fb4c8",null),J=G.exports,W=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"box"},[t._m(0),e("div",{staticClass:"login"},[e("div",{staticClass:"login_text"},[t._v("學號：")]),e("el-input",{attrs:{placeholder:"請輸入學號",clearable:""},model:{value:t.student.account,callback:function(e){t.$set(t.student,"account",e)},expression:"student.account"}})],1),e("div",{staticClass:"login"},[e("div",{staticClass:"login_text"},[t._v("密碼：")]),e("el-input",{attrs:{placeholder:"請輸入密碼",clearable:"","show-password":""},model:{value:t.student.password,callback:function(e){t.$set(t.student,"password",e)},expression:"student.password"}})],1),e("div",{staticClass:"btn"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.login("student")}}},[t._v("學生登入")])],1)]),e("div",{staticClass:"box"},[t._m(1),e("div",{staticClass:"login"},[e("div",{staticClass:"login_text"},[t._v("帳號：")]),e("el-input",{attrs:{placeholder:"請輸入帳號",clearable:""},model:{value:t.teacher.account,callback:function(e){t.$set(t.teacher,"account",e)},expression:"teacher.account"}})],1),e("div",{staticClass:"login"},[e("div",{staticClass:"login_text"},[t._v("密碼：")]),e("el-input",{attrs:{placeholder:"請輸入密碼",clearable:"","show-password":""},model:{value:t.teacher.password,callback:function(e){t.$set(t.teacher,"password",e)},expression:"teacher.password"}})],1),e("div",{staticClass:"btn"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.login("teacher")}}},[t._v("教師登入")])],1)])])},X=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("i",{staticClass:"fa-solid fa-id-card"}),t._v(" 學生登入")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("i",{staticClass:"fa-solid fa-id-card"}),t._v(" 教師登入")])}],Z={name:"Login",data(){return{text:"",student:{account:"",password:"",type:"student"},teacher:{account:"",password:"",type:"teacher"}}},mounted(){},methods:{async login(t){let e;if(Object.values(this[t]).some((t=>null===t||void 0===t||""===t.trim())))return this.$bus.$emit("handleAlert","登入訊息","登入資料不可為空。","error");try{const s=await g.A.post("/login/verify",this[t]);e=s.data,"success"==e.type&&(this.$bus.$currentUser=s.data.userInfo,this.$bus.$emit("setUserInfo"),this.$router.replace(`/academic/${t}Info`).catch((t=>{})))}catch(s){}finally{this.$bus.$emit("handleAlert","登入訊息",e.message,e.type)}}}},tt=Z,et=(0,n.A)(tt,W,X,!1,null,"b81932bc",null),st=et.exports,at=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"sum_box"},[e("router-link",{staticClass:"sum",attrs:{to:""}},[e("div",{staticClass:"sum_title"},[t._v("已開通課程")]),e("div",{staticClass:"sum_num"},[t._v(t._s(t.course_num))])]),e("router-link",{staticClass:"sum",attrs:{to:""}},[e("div",{staticClass:"sum_title"},[t._v("可使用課程")]),e("div",{staticClass:"sum_num"},[t._v(t._s(t.available_num))])]),e("router-link",{staticClass:"sum",attrs:{to:""}},[e("div",{staticClass:"sum_title"},[t._v("已失效課程")]),e("div",{staticClass:"sum_num"},[t._v(t._s(t.inavailable_num))])])],1),e("div",{staticClass:"table"},[e("router-view")],1)])},it=[],lt={name:"TeacherInfo",async mounted(){this.initialize()},data(){return{course_num:0,available_num:0,inavailable_num:0}},methods:{initialize(){this.getCourse()},async getCourse(){try{const t=await g.A.get("/api/infoPage/getStudentCourse",{headers:{"x-user-token":m.A.get("authToken")}});t.data.courses&&(this.course_num=t.data.courses.length,this.available_num=t.data.courses.filter((t=>!0===t.status)).length,this.inavailable_num=this.course_num-this.available_num)}catch(t){}}}},ot=lt,rt=(0,n.A)(ot,at,it,!1,null,"955068dc",null),nt=rt.exports,ct=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"sum_box"},[e("router-link",{staticClass:"sum",attrs:{to:"clientTable"}},[e("div",{staticClass:"sum_title"},[t._v("學生總數 (上限 "+t._s(t.limit.studentNum)+" 人)")]),e("div",{staticClass:"sum_num"},[t._v(t._s(t.student_num))])]),e("router-link",{staticClass:"sum",attrs:{to:{path:"teacherCourseTable"}}},[e("div",{staticClass:"sum_title"},[t._v("課程總數 (上限 "+t._s(t.limit.classNum)+" 堂)")]),e("div",{staticClass:"sum_num"},[t._v(t._s(t.course_num))])]),e("router-link",{staticClass:"sum",attrs:{to:""}},[e("div",{staticClass:"sum_title"},[t._v("空間用量 (上限 "+t._s(t.limit.memory)+" MB)")]),e("div",{staticClass:"sum_num"},[t._v(t._s(t.usage_memory))])])],1),e("div",{staticClass:"table"},[e("router-view")],1)])},dt=[],ut={name:"TeacherInfo",async mounted(){this.$bus.$on("setStudentNum",this.setStudentNum),this.$bus.$on("setCourseNum",this.setCourseNum),this.$bus.$on("getUsageMemory",this.getUsageMemory),this.initialize()},data(){return{student_num:0,course_num:0,usage_memory:0,limit:{memory:0,studentNum:0,classNum:0}}},methods:{initialize(){this.getUsageMemory(),this.getStudent(),this.getCourse()},setStudentNum(t){this.student_num=t},setCourseNum(t){this.course_num=t},async getCourse(){try{const t=await g.A.get("/api/infoPage/getCourse",{headers:{"x-user-token":m.A.get("authToken")}});t.data.courses&&(this.course_num=t.data.courses.length)}catch(t){}},async getStudent(){try{const t=await g.A.get("/api/infoPage/getStudent",{headers:{"x-user-token":m.A.get("authToken")}});t.data.students&&(this.student_num=t.data.students.length)}catch(t){}},async getUsageMemory(){const t=await g.A.get("/api/getUsageMemory",{headers:{"x-user-token":m.A.get("authToken")}});"success"==t.data.type?(t.data.size<100?this.usage_memory=parseFloat(t.data.size).toFixed(2):t.data.size<1e3?this.usage_memory=parseFloat(t.data.size).toFixed(1):this.usage_memory=parseInt(t.data.size),this.limit=t.data.limit):this.$bus.$emit("handleAlert","儲存空間資訊通知",t.data.message,t.data.type)}}},mt=ut,ht=(0,n.A)(mt,ct,dt,!1,null,"4793429e",null),pt=ht.exports,ft=function(){var t=this,e=t._self._c;return e("div",[t._m(0),e("el-table",{staticClass:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",height:"calc(100vh - 360px)","empty-text":"暫無數據"}},[e("el-table-column",{attrs:{prop:"createTime",label:"開課時間"}}),e("el-table-column",{attrs:{prop:"courseId",label:"課程代碼"}}),e("el-table-column",{attrs:{prop:"courseName",label:"課程名稱"}}),e("el-table-column",{attrs:{prop:"lecturer",label:"授課教師"}}),e("el-table-column",{attrs:{prop:"status",label:"狀態"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{class:s.row.status?"valid":"invalid"},[t._v(t._s(s.row.status?"公開":"不公開"))])]}}])}),e("el-table-column",{attrs:{label:"課程通道",width:"250"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"btn",on:{click:function(e){s.row.status&&t.goToCourse(s.row.idx)}}},[t._v(t._s(s.row.status?"進入課程":"目前無法進入課程"))])]}}])})],1)],1)},vt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"tableTitle"},[e("div",{staticClass:"tableTitle_left"},[t._v("課程總覽")])])}],gt={name:"StudentCourseTable",data(){return{tableData:[]}},mounted(){this.getCourseList()},methods:{goToCourse(t){this.$router.push({path:"/academic/class",query:{idx:t}}).catch((t=>{}))},async getCourseList(){const t=await g.A.get("/api/infoPage/getStudentCourse",{headers:{"x-user-token":m.A.get("authToken")}});t.data.courses?(this.tableData=t.data.courses,this.$bus.$emit("setCourseNum",this.tableData.length)):this.$bus.$emit("handleAlert","課程資料查詢通知",t.data.message,t.data.type)}}},_t=gt,bt=(0,n.A)(_t,ft,vt,!1,null,"6fd644f2",null),yt=bt.exports,Ct=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"tableTitle"},[e("div",{staticClass:"tableTitle_left"},[t._v("課程總覽")]),e("el-button",{staticClass:"tableTitle_right",on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("新增課程")])],1),e("el-table",{staticClass:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",height:"calc(100vh - 360px)","empty-text":"暫無數據"}},[e("el-table-column",{attrs:{prop:"createTime",label:"創建時間"}}),e("el-table-column",{attrs:{prop:"courseId",label:"課程代碼"}}),e("el-table-column",{attrs:{prop:"lecturer",label:"授課教師"}}),e("el-table-column",{attrs:{prop:"status",label:"狀態"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{class:s.row.status?"valid":"invalid"},[t._v(t._s(s.row.status?"公開":"不公開"))])]}}])}),e("el-table-column",{attrs:{label:"管理操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"btn"},[e("el-button",{staticClass:"btn_link",on:{click:function(e){return t.openStudentList(s.row)}}},[t._v("編輯")]),e("el-button",{staticClass:"btn_link",attrs:{type:"warning"},on:{click:function(e){return t.stopCourse(s.row.courseId,s.row.idx)}}},[t._v(t._s(s.row.status?"隱藏":"公開"))]),e("el-button",{staticClass:"btn_link",attrs:{type:"danger"},on:{click:function(e){return t.deleteCourse(s.row.courseId,s.row.idx)}}},[t._v("刪除")])],1)]}}])})],1),e("el-dialog",{attrs:{title:"創建課程",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.form}},[e("el-form-item",{attrs:{label:"課程名稱"}},[e("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:t.form.courseName,callback:function(e){t.$set(t.form,"courseName",e)},expression:"form.courseName"}})],1),e("el-form-item",{attrs:{label:"課程代碼"}},[e("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:t.form.courseId,callback:function(e){t.$set(t.form,"courseId",e)},expression:"form.courseId"}})],1),e("el-form-item",{attrs:{label:"授課教師"}},[e("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:t.form.lecturer,callback:function(e){t.$set(t.form,"lecturer",e)},expression:"form.lecturer"}})],1)],1),e("div",{staticClass:"courseTime_title"},[t._v("上課時間")]),t._l(t.showTimeBlock,(function(s,a){return e("div",{key:a,staticClass:"courseTime_block"},[e("el-select",{staticClass:"courseTime_block_weekday",attrs:{placeholder:"請選擇星期"},model:{value:t.selected_weekday[s-1],callback:function(e){t.$set(t.selected_weekday,s-1,e)},expression:"selected_weekday[idx-1]"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"開始時間","end-placeholder":"結束時間",placeholder:"請選擇時間範圍"},model:{value:t.selected_period[s-1],callback:function(e){t.$set(t.selected_period,s-1,e)},expression:"selected_period[idx-1]"}})],1)})),e("div",{staticClass:"class_banner_title"},[t._v("課程封面上傳（限制兩張，上傳後暫不提供修改，至少 350 pixel x 175 pixel）")]),e("el-upload",{attrs:{action:"#","on-change":t.handleUpload,"list-type":"picture-card","auto-upload":!1,"file-list":t.fileList,limit:2,multiple:!0,accept:"image/*"},scopedSlots:t._u([{key:"file",fn:function({file:s}){return e("div",{},[e("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:s.url,alt:""}}),e("span",{staticClass:"el-upload-list__item-actions"},[e("span",{staticClass:"el-upload-list__item-preview",on:{click:function(e){return t.handlePictureCardPreview(s)}}},[e("i",{staticClass:"el-icon-zoom-in"})]),e("span",{staticClass:"el-upload-list__item-delete",on:{click:function(e){return t.handleRemove(s)}}},[e("i",{staticClass:"el-icon-delete"})])])])}}])},[e("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),e("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.create()}}},[t._v("創建")])],1)],2),e("el-dialog",{attrs:{title:`${t.setStudentList.courseId} - 修課名單`,visible:t.dialogFormVisible2},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[e("el-form",{attrs:{model:t.setStudentList}},[e("el-form-item",{attrs:{label:"課程代碼"}},[e("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:t.setStudentList.courseId,callback:function(e){t.$set(t.setStudentList,"courseId",e)},expression:"setStudentList.courseId"}})],1),e("el-form-item",{attrs:{label:"授課教師"}},[e("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:t.setStudentList.lecturer,callback:function(e){t.$set(t.setStudentList,"lecturer",e)},expression:"setStudentList.lecturer"}})],1)],1),e("el-transfer",{staticClass:"transfer",attrs:{props:{key:"idx",label:"name"},filterable:!0,"filter-method":t.customFilter,"filter-placeholder":"請輸入學生姓名或學號",data:t.students,titles:["學生列表","已選學生"]},model:{value:t.setStudentList.studentList,callback:function(e){t.$set(t.setStudentList,"studentList",e)},expression:"setStudentList.studentList"}}),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible2=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.pushStudentList()}}},[t._v("保存")])],1)],1)],1)},xt=[],wt={name:"TeacherCourseTable",data(){return{tableData:[],dialogFormVisible:!1,form:{courseName:"",courseId:"",lecturer:"",courseTime:[]},options:[{value:"星期一",label:"星期一"},{value:"星期二",label:"星期二"},{value:"星期三",label:"星期三"},{value:"星期四",label:"星期四"},{value:"星期五",label:"星期五"},{value:"星期六",label:"星期六"},{value:"星期日",label:"星期日"}],selected_weekday:[],selected_period:[],fileList:[],dialogImageUrl:"",dialogVisible:!1,dialogFormVisible2:!1,students:[],setStudentList:{idx:"",courseId:"",lecturer:"",newCourseId:"",studentList:[]}}},mounted(){this.getCourseList()},computed:{showTimeBlock(){return this.selected_weekday.length+1}},methods:{async getStudentList(){const t=await g.A.get("/api/infoPage/getStudent",{headers:{"x-user-token":m.A.get("authToken")}});"success"==t.data.type?(this.students=t.data.students,this.$bus.$emit("setStudentNum",this.students.length)):this.$bus.$emit("handleAlert","用戶資料查詢通知",t.data.message,t.data.type)},async getCourseList(){const t=await g.A.get("/api/infoPage/getCourse",{headers:{"x-user-token":m.A.get("authToken")}});"success"==t.data.type?(this.tableData=t.data.courses,this.$bus.$emit("setCourseNum",this.tableData.length)):this.$bus.$emit("handleAlert","課程資料查詢通知",t.data.message,t.data.type)},async create(){for(var t=0;t<Math.min(this.selected_weekday.length,this.selected_period.length);t++){if(console.log(this.selected_weekday[t],this.selected_period[t]),!this.selected_weekday[t]||!this.selected_period[t])return this.$bus.$emit("handleAlert","課程創建通知","時間不可為空","error");this.form.courseTime.push({weekday:this.selected_weekday[t],period:this.selected_period[t]})}const e=new FormData;e.append("courseName",this.form.courseName),e.append("courseId",this.form.courseId),e.append("courseTime",JSON.stringify(this.form.courseTime)),e.append("lecturer",this.form.lecturer),this.fileList&&this.fileList.length>0&&this.fileList.forEach(((t,s)=>{e.append("attachments",t.raw)}));const s=await g.A.post("/api/infoPage/createCourse",e,{headers:{"x-user-token":m.A.get("authToken")}});"success"==s.data.type?(this.getCourseList(),this.dialogFormVisible=!1,this.form={courseName:"",courseId:"",courseTime:[],lecturer:""},this.selected_weekday=[],this.selected_period=[],this.$bus.$emit("getUsageMemory"),this.$bus.$emit("handleAlert","課程資料創建通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","課程資料創建通知",s.data.message,s.data.type)},async deleteCourse(t,e){try{await this.$confirm(`確認是否刪除課程 (${t})?`,"提示",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning"});const s=await g.A.delete(`/api/infoPage/deleteCourse/${e}`,{headers:{"x-user-token":m.A.get("authToken")}});"success"==s.data.type?(this.getCourseList(),this.$bus.$emit("getUsageMemory"),this.$bus.$emit("handleAlert","課程資料刪除通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","課程資料刪除通知",s.data.message,s.data.type)}catch(s){}},async stopCourse(t,e){try{await this.$confirm(`確認是否變更課程 (${t}) 權限?`,"提示",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning"});const s=await g.A.put(`/api/infoPage/stopCourse/${e}`,{},{headers:{"x-user-token":m.A.get("authToken")}});"success"==s.data.type?(this.getCourseList(),this.$bus.$emit("handleAlert","課程權限變更通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","課程權限變更通知",s.data.message,s.data.type)}catch(s){}},handleUpload(t){this.fileList.push(t)},handleRemove(t){const e=this.fileList.indexOf(t);-1!==e&&this.fileList.splice(e,1)},handlePictureCardPreview(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},async openStudentList(t){this.setStudentList.idx=t.idx,this.setStudentList.courseId=t.courseId,this.setStudentList.lecturer=t.lecturer,await this.getStudentList(),await this.getCourseList();const e=this.tableData.filter((e=>e.idx==t.idx))[0];this.setStudentList.studentList=e.studentList,this.dialogFormVisible2=!0},async pushStudentList(){try{await this.$confirm(`確認是否修改課程 (${this.setStudentList.courseId})?`,"提示",{confirmButtonText:"確認",cancelButtonText:"取消",type:"warning"});const t=await g.A.post("/api/infoPage/setStudentToCourse",this.setStudentList,{headers:{"x-user-token":m.A.get("authToken")}});"success"==t.data.type?(this.getCourseList(),this.getStudentList(),this.dialogFormVisible2=!1,this.setStudentList={idx:"",courseId:"",lecturer:"",studentList:[]},this.$bus.$emit("handleAlert","課程修改通知",t.data.message,t.data.type)):this.$bus.$emit("handleAlert","課程修改通知",t.data.message,t.data.type)}catch(t){}},customFilter(t,e){return e.name.toLowerCase().includes(t.toLowerCase())||e.account.toLowerCase().includes(t.toLowerCase())}}},kt=wt,$t=(0,n.A)(kt,Ct,xt,!1,null,"92c2d616",null),Tt=$t.exports,At=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"tableTitle"},[e("div",{staticClass:"tableTitle_left"},[t._v("學生總覽")]),e("div",{staticClass:"tableTitle_right"},[e("el-button",{on:{click:function(e){return t.editSelf()}}},[t._v("編輯個人資料")]),e("el-button",{on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("新增學生")])],1)]),e("el-table",{staticClass:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",height:"calc(100vh - 360px)","empty-text":"暫無數據"}},[e("el-table-column",{attrs:{prop:"createTime",label:"創建時間"}}),e("el-table-column",{attrs:{prop:"name",label:"學生姓名"}}),e("el-table-column",{attrs:{prop:"lastOnline",label:"上次訪問時間"}}),e("el-table-column",{attrs:{prop:"loginIP",label:"登入 IP"}}),e("el-table-column",{attrs:{prop:"status",label:"狀態"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{class:s.row.status?"valid":"invalid"},[t._v(t._s(s.row.status?"有效":"凍結"))])]}}])}),e("el-table-column",{attrs:{label:"管理操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"btn"},[e("el-button",{staticClass:"btn_link",on:{click:function(e){return t.editUser(s.row.idx)}}},[t._v("查看")]),e("el-button",{staticClass:"btn_link",attrs:{type:"warning"},on:{click:function(e){return t.stopUser(s.row.account,s.row.idx)}}},[t._v(t._s(s.row.status?"凍結":"解凍"))]),e("el-button",{staticClass:"btn_link",attrs:{type:"danger"},on:{click:function(e){return t.deleteUser(s.row.account,s.row.idx)}}},[t._v("刪除")])],1)]}}])})],1),e("el-dialog",{attrs:{title:"創建學生",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.form}},[e("el-form-item",{attrs:{label:"學生學號"}},[e("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),e("el-form-item",{attrs:{label:"學生名稱"}},[e("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"學生密碼"}},[e("el-input",{attrs:{autocomplete:"off","show-password":"",clearable:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.create()}}},[t._v("創建")])],1)],1)],1)},It=[],Lt={name:"ClientTable",data(){return{tableData:[],dialogFormVisible:!1,form:{account:"",password:"",name:"",type:"student"}}},mounted(){this.getData()},methods:{async getData(){const t=await g.A.get("/api/infoPage/getStudent",{headers:{"x-user-token":m.A.get("authToken")}});t.data.students?(this.tableData=t.data.students,this.$bus.$emit("setStudentNum",this.tableData.length)):this.$bus.$emit("handleAlert","用戶資料查詢通知",t.data.message,t.data.type)},async create(){const t=await g.A.post("/api/infoPage/createStudent",this.form,{headers:{"x-user-token":m.A.get("authToken")}});"success"==t.data.type?(this.getData(),this.dialogFormVisible=!1,this.form.account="",this.form.password="",this.form.name="",this.$bus.$emit("handleAlert","用戶資料創建通知",t.data.message,t.data.type)):this.$bus.$emit("handleAlert","用戶資料創建通知",t.data.message,t.data.type)},async deleteUser(t,e){try{await this.$confirm(`確認是否刪除用戶 (${t})?`,"提示",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning"});const s=await g.A.delete(`/api/infoPage/deleteStudent/${e}`,{headers:{"x-user-token":m.A.get("authToken")}});"success"==s.data.type?(this.getData(),this.$bus.$emit("getUsageMemory"),this.$bus.$emit("handleAlert","用戶資料刪除通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","用戶資料刪除通知",s.data.message,s.data.type)}catch(s){}},async stopUser(t,e){try{await this.$confirm(`確認是否變更用戶 (${t}) 權限?`,"提示",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning"});const s=await g.A.put(`/api/infoPage/stopStudent/${e}`,{},{headers:{"x-user-token":m.A.get("authToken")}});"success"==s.data.type?(this.getData(),this.$bus.$emit("handleAlert","用戶權限變更通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","用戶權限變更通知",s.data.message,s.data.type)}catch(s){}},async editSelf(){this.$router.push({path:"/academic/modifyInfo",query:{idx:this.$bus.$currentUser.idx}}).catch((t=>{}))},async editUser(t){this.$router.push({path:"/academic/modifyInfo",query:{idx:t}}).catch((t=>{}))}}},St=Lt,Ut=(0,n.A)(St,At,It,!1,null,"024221d4",null),Dt=Ut.exports,Ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"header"},[e("div",{staticClass:"logo"},[e("img",{staticClass:"logo_img",attrs:{src:"img/horizontal_logo_white.png",alt:""},on:{click:function(e){return t.goTo("/")}}})]),e("div",{staticClass:"contact"},[e("div",{staticClass:"contact_item",on:{click:function(e){return t.scrollToSection("introduction")}}},[t._v("平台介紹")]),e("div",{staticClass:"contact_item",on:{click:function(e){return t.scrollToSection("feature")}}},[t._v("平台特色")]),e("div",{staticClass:"contact_item",on:{click:function(e){return t.scrollToSection("calculator")}}},[t._v("價格方案")]),e("div",{staticClass:"contact_item",on:{click:function(e){return t.scrollToSection("developer")}}},[t._v("開發團隊")]),e("div",{staticClass:"contact_item",on:{click:function(e){return t.scrollToSection("contact")}}},[t._v("聯絡我們")])])]),e("div",{ref:"top",staticClass:"top"},[e("div",{staticClass:"content"},[e("div",{staticClass:"title_block"},[e("div",{staticClass:"title"},[t._v("Sky Academy")]),e("div",{staticClass:"subTitle"},[e("div",{ref:"subText",staticClass:"subText"},[t._v(t._s(t.subTitle))])]),e("div",{staticClass:"box"},[e("div",{staticClass:"btn btn-1",on:{click:function(e){return t.goTo("/academic")}}},[t._v("快速開始 "),e("i",{staticClass:"fa-solid fa-arrow-right start-arrow"})]),t._m(0)])]),e("div",{staticClass:"carousel"},[e("el-carousel",{attrs:{interval:3e3,type:"card",height:"281.25px"}},t._l(t.banner,(function(t,s){return e("el-carousel-item",{key:s},[e("div",{staticClass:"medium"},[e("img",{attrs:{src:t,alt:""}})])])})),1)],1)])]),e("div",{ref:"introduction",staticClass:"intro"},[e("div",{staticClass:"intro_title_1"},[t._v("平台介紹")]),t._m(1)]),e("div",{ref:"feature",staticClass:"intro"},[e("div",{staticClass:"intro_title_2"},[t._v("平台特色")]),t._m(2)]),e("div",{ref:"calculator",staticClass:"calculator"},[e("div",{staticClass:"calculator_title"},[t._v("價格方案")]),t._m(3)]),e("div",{ref:"developer",staticClass:"developer"},[e("div",{staticClass:"developer_title"},[t._v("開發團隊")]),t._m(4)]),e("div",{ref:"contact",staticClass:"footer"},[t._m(5)]),e("div",{staticClass:"back",on:{click:function(e){return t.scrollToSection("top")}}},[e("i",{staticClass:"fa-solid fa-angles-up"})])])},Mt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"btn btn-2"},[t._v("詳細資料 "),e("i",{staticClass:"fa-solid fa-chevron-right"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"intro_simple_box"},[e("div",{staticClass:"intro_simple"},[e("div",{staticClass:"intro_text_title"},[t._v("🌐 雲端教育的全新體驗 — 為教學而生的智慧平台")]),e("div",{staticClass:"intro_text"},[t._v(" 本平台是一款專為雲端教學量身打造的教育管理系統，適用於個人家教、補習班、以及各類教學機構，協助用戶輕鬆管理學生、課程與教材內容。 我們以「簡潔直觀、快速上手」為設計核心，讓每位教育工作者都能無痛轉型數位教學，輕鬆掌握現代化教學需求。 ")]),e("div",{staticClass:"intro_text_title"},[t._v("🎗 推動教育平權 — 我們一起努力")]),e("div",{staticClass:"intro_text"},[t._v(" 我們相信，知識應該是無價的。 因此，若您正致力於扶助弱勢、並為弱勢學子提供免費教學資源，歡迎向我們申請公益使用資格。"),e("br"),t._v(" ✨ 經審核通過後，我們將全額提供平台使用額度，完全免費，與您攜手打造更有希望的未來。 ")])]),e("div",{staticClass:"intro_img"},[e("img",{attrs:{src:"img/volunteer.jpg",alt:""}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"intro_simple_box"},[e("div",{staticClass:"intro_img"},[e("img",{attrs:{src:"img/lock.jpg",alt:""}})]),e("div",{staticClass:"intro_simple"},[e("div",{staticClass:"intro_text_title"},[t._v("🎯 特色一：極簡操作介面，零學習曲線上手")]),e("div",{staticClass:"intro_text"},[t._v(" 平台採用現代化介面設計，操作邏輯直覺清晰，無需繁瑣設定與技術背景即可快速上手。 不論是排課、上傳教材，還是管理學生資訊，皆可透過簡單幾步完成，大幅降低教學行政負擔。 ")]),e("div",{staticClass:"intro_text_title"},[t._v("🔐 特色二：嚴謹的隱私與資料保護機制")]),e("div",{staticClass:"intro_text"},[t._v(" 我們深知教育數據的敏感性，因此平台採用資料分群隔離以及嚴格的權限控管機制，保障學生與教師的個資與智慧財產權。 本平台同時支援多層身份驗證機制，可以大幅降低有心人士的侵擾，使用戶與學生能夠獲得安全的教育環境。 ")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"calculator_box_all"},[e("div",{staticClass:"calculator_box"},[e("div",{staticClass:"calculator_box_title"},[t._v("學生優惠")]),e("div",{staticClass:"calculator_detail"},[e("div",{staticClass:"detail"},[t._v("維護費用（每月）： NTD 59 元 / 組")]),e("div",{staticClass:"detail"},[t._v("學生人數（每月）： NTD 20 元 / 人")]),e("div",{staticClass:"detail"},[t._v("課程總數（每月）： NTD 20 元 / 堂")]),e("div",{staticClass:"detail"},[t._v("空間用量（每月）： NTD 1 元 / GB")])])]),e("div",{staticClass:"calculator_box"},[e("div",{staticClass:"calculator_box_title"},[t._v("企業方案")]),e("div",{staticClass:"calculator_detail"},[e("div",{staticClass:"detail"},[t._v("維護費用（每月）： NTD 499 元 / 組")]),e("div",{staticClass:"detail"},[t._v("學生人數（每月）： NTD 25 元 / 人")]),e("div",{staticClass:"detail"},[t._v("課程總數（每月）： NTD 25 元 / 堂")]),e("div",{staticClass:"detail"},[t._v("空間用量（每月）： NTD 1 元 / GB")])])]),e("div",{staticClass:"calculator_box"},[e("div",{staticClass:"calculator_box_title"},[t._v("社會弱勢扶助方案")]),e("div",{staticClass:"calculator_detail"},[e("div",{staticClass:"detail"},[t._v("維護費用（免費）： 0 元")]),e("div",{staticClass:"detail"},[t._v("學生人數（免費）： 100 人")]),e("div",{staticClass:"detail"},[t._v("課程總數（免費）： 10 堂")]),e("div",{staticClass:"detail"},[t._v("空間用量（免費）： 10 GB")])])]),e("div",{staticClass:"calculator_box"},[e("div",{staticClass:"calculator_box_title"},[t._v("本地架設方案")]),e("div",{staticClass:"calculator_detail"},[e("div",{staticClass:"detail"},[t._v("授權費用（每年）： 31200 元 / 組")]),e("div",{staticClass:"detail"},[t._v("學生人數（每年）： FREE")]),e("div",{staticClass:"detail"},[t._v("課程總數（每年）： FREE")]),e("div",{staticClass:"detail"},[t._v("空間用量（每年）： FREE")])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"developer_content"},[e("div",{staticClass:"developer_img"},[e("img",{attrs:{src:"img/author.jpg",alt:""}})]),e("div",{staticClass:"developer_intro_box"},[e("div",{staticClass:"developer_name"},[t._v("專案作者：林英豪")]),e("div",{staticClass:"developer_detail"},[t._v(" 作者目前就讀於國立清華大學工程與系統科學系，平時除學業之餘，長期投身於社會正義的實踐與推廣。 談及平台的誕生初衷，作者表示：在科技飛速進展的今日，他希望能透過雲端技術的力量，為弱勢學子打造一個更平等、可及的學習環境，讓教育資源不再因地域或經濟條件而受限。 儘管平台在初期建置過程中面臨重重挑戰，無論是開發技術、經費壓力，甚至平台維運皆需自行籌措資源，但他從未退縮。 "),e("br"),t._v("💡 他觀察到，許多懷抱熱忱、願意投入公益教育的學生或團體，常因商業平台的高額授權費而望而卻步，最終無法實踐心中的理想。正因如此，他堅定地決定完成這個平台，並推出**「社會扶助方案」**——免費開放給所有願意為弱勢教育努力的個人與團體使用。 這不僅是一個技術上的成就，更是一場理想的延續。 ")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer_item"},[e("div",[t._v("聯絡方式：blc0000421@gmail.com")]),e("div",[t._v("Copyright © 2025 Sky Academy All Rights Reserved")])])}],Pt={name:"Index",data(){return{banner:["img/banner1.jpg","img/banner2.jpg","img/banner3.jpg"],subTitle:"We’ve released a new and streamlined student course management interface."}},mounted(){setTimeout((()=>{try{let t=this.$refs.subText;t&&(t.style="border-right:0")}catch(t){}}),6500)},methods:{goTo(t){this.$router.push(t).catch((t=>{}))},scrollToSection(t){const e=this.$refs[t];if(e){const t=120,s=e.getBoundingClientRect().top+window.pageYOffset-t;window.scrollTo({top:s,behavior:"smooth"})}}},beforeDestroy(){}},Bt=Pt,Vt=(0,n.A)(Bt,Ft,Mt,!1,null,"6c1218a9",null),Nt=Vt.exports,Et=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"header"},[t._v("使用者資料維護 "),e("el-button",{staticClass:"btn",attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.modifyData()}}},[t._v("更新資料")])],1),e("div",{staticClass:"box"},[e("div",{staticClass:"userInfoBox"},[e("div",{staticClass:"user_info"},[e("div",{staticClass:"inputBox"},[e("div",{staticClass:"input_title"},[t._v("學號：")]),e("el-input",{attrs:{placeholder:"請輸入使用者學號",disabled:""},model:{value:t.userInfo.account,callback:function(e){t.$set(t.userInfo,"account",e)},expression:"userInfo.account"}})],1),e("div",{staticClass:"inputBox"},[e("div",{staticClass:"input_title"},[t._v("姓名：")]),e("el-input",{attrs:{placeholder:"請輸入使用者姓名"},model:{value:t.userInfo.name,callback:function(e){t.$set(t.userInfo,"name",e)},expression:"userInfo.name"}})],1),e("div",{staticClass:"inputBox"},[e("div",{staticClass:"input_title"},[t._v("密碼：")]),e("el-input",{attrs:{placeholder:"請輸入使用者密碼","show-password":""},model:{value:t.userInfo.password,callback:function(e){t.$set(t.userInfo,"password",e)},expression:"userInfo.password"}})],1),e("div",{staticClass:"inputBox"},[e("div",{staticClass:"input_title"},[t._v("電話：")]),e("el-input",{attrs:{placeholder:"請輸入電話號碼"},model:{value:t.userInfo.phone,callback:function(e){t.$set(t.userInfo,"phone",e)},expression:"userInfo.phone"}})],1),e("div",{staticClass:"inputBox"},[e("div",{staticClass:"input_title"},[t._v("電子信箱：")]),e("el-input",{attrs:{placeholder:"請輸入電子信箱"},model:{value:t.userInfo.mailAddress,callback:function(e){t.$set(t.userInfo,"mailAddress",e)},expression:"userInfo.mailAddress"}})],1),e("div",{staticClass:"inputBox"},[e("div",{staticClass:"input_title"},[t._v("住家地址：")]),e("el-input",{attrs:{placeholder:"請輸入住家地址"},model:{value:t.userInfo.address,callback:function(e){t.$set(t.userInfo,"address",e)},expression:"userInfo.address"}})],1)]),e("div",{staticClass:"user_img_box"},[e("div",{staticClass:"user_img",on:{click:function(e){return t.openFile()}}},[e("img",{attrs:{src:t.userInfo.userImgUrl,alt:""}}),e("div",{staticClass:"uploadImgBtn"},[t._v("點擊上傳")])]),e("input",{ref:"imgFile",staticClass:"imgFile",attrs:{type:"file",accept:"image/*"},on:{change:function(e){return t.handleChangeFile()}}})])]),e("div",{staticClass:"id_card_box"},[e("div",{ref:"forward",staticClass:"id_card id_card_forward"},[t._m(0),e("div",{staticClass:"id_card_forward_name_title"},[t._v("姓名/Name")]),e("div",{staticClass:"id_card_forward_name"},[t._v(t._s(t.userInfo.name))]),e("div",{staticClass:"id_card_forward_id_title"},[t._v("證號/"+t._s("teacher"==t.userInfo.type?"Teacher":"Student")+" ID")]),e("div",{staticClass:"id_card_forward_id"},[t._v(t._s(t.userInfo.account))]),e("div",{staticClass:"id_card_forward_imgBox"},[e("img",{attrs:{src:t.userInfo.userImgUrl,alt:""}})]),e("div",{staticClass:"id_card_forward_barcode"},[e("svg",{ref:"barcode"})]),e("div",{staticClass:"id_card_forward_type"},[t._v(t._s("teacher"==t.userInfo.type?"教師":"學生")+"證")]),e("div",{staticClass:"id_card_forward_type_eng"},[t._v(t._s("teacher"==t.userInfo.type?"Teacher":"Student")+" ID Card")])]),e("div",{ref:"backward",staticClass:"id_card id_card_backward"},[t._m(1)]),e("div",{staticClass:"id_card_download"},[e("div",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.downloadForward()}}},[t._v("下載卡片正面")])],1),e("div",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.downloadBackward()}}},[t._v("下載卡片背面")])],1)])])])])},Ot=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"id_card_forward_top"},[e("img",{attrs:{src:"img/horizontal_logo.png",alt:""}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"id_card_backward_center"},[e("div",{staticClass:"id_card_backward_center_first"},[t._v("Knowledge lights the future")]),e("div",{staticClass:"id_card_backward_center_first"},[t._v("Learning creates possibilities")])])}],qt=s(2248),Rt=s.n(qt),jt=s(4533),zt=s.n(jt),Qt={name:"ModifyStudentInfo",data(){return{loading:!1,idx:"",file:{},userInfo:{idx:"",type:"",account:"",name:"",password:"",phone:"",mailAddress:"",address:"",userImgUrl:""}}},async mounted(){let t=this.$route.query.idx;t?(this.idx=t,await this.getData()):this.$bus.$emit("handleAlert","使用者資料維護通知","參數不可為空","error")},methods:{async getData(){const t=m.A.get("authToken"),e=await g.A.get(`/api/userInfo/getUserInfo/${this.idx}`,{headers:{"x-user-token":t}});"success"==e.data.type?(e.data.user.userImgUrl+=`?${(new Date).getTime()}`,this.userInfo=e.data.user,this.$bus.$emit("updateCurrentUser"),this.generateBarcode()):this.$bus.$emit("handleAlert","使用者資料獲取通知",e.data.message,e.data.type)},async modifyData(){this.loading=!0;let t=new FormData;t.append("userInfo",JSON.stringify(this.userInfo)),t.append("attachments",this.file);try{const e=m.A.get("authToken"),s=await g.A.post(`/api/userInfo/modifyUserInfo/${this.idx}`,t,{headers:{"x-user-token":e}});"success"==s.data.type?(this.$refs["imgFile"].value="",this.getData(),this.$bus.$emit("handleAlert","使用者資料更新通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","使用者資料更新通知",s.data.message,s.data.type)}catch(e){}finally{this.loading=!1}},generateBarcode(){Rt()(this.$refs.barcode,this.userInfo.idx,{format:"CODE128",displayValue:!0,lineColor:"black",background:"transparent",width:2,height:100,textMargin:20})},openFile(){this.$refs["imgFile"].click()},handleChangeFile(){let t=this.$refs["imgFile"].files[0];if(t){let e=new FileReader;e.readAsDataURL(t),e.onload=()=>{this.userInfo.userImgUrl=e.result},this.file=t}},downloadForward(){const t=this.$refs.forward;zt()(t,{scale:10,useCORS:!0}).then((t=>{const e=document.createElement("a");e.href=t.toDataURL("image/png"),e.download="forward.png",e.click()}))},downloadBackward(){const t=this.$refs.backward;zt()(t,{scale:10,useCORS:!0}).then((t=>{const e=document.createElement("a");e.href=t.toDataURL("image/png"),e.download="backward.png",e.click()}))}}},Ht=Qt,Kt=(0,n.A)(Ht,Et,Ot,!1,null,"565f3ca8",null),Yt=Kt.exports;a["default"].use(u.Ay);const Gt=new u.Ay({routes:[{path:"/",component:Nt},{path:"/academic",component:$,children:[{path:"post",component:z},{path:"learn",component:U},{path:"class",component:V},{path:"practice",component:J},{path:"login",component:st},{path:"studentInfo",component:nt,children:[{path:"studentCourseTable",component:yt},{path:"/",redirect:"studentCourseTable"}]},{path:"teacherInfo",component:pt,children:[{path:"clientTable",component:Dt},{path:"teacherCourseTable",component:Tt},{path:"/",redirect:"clientTable"}]},{path:"modifyInfo",component:Yt},{path:"/",redirect:"post"}]}]});Gt.beforeEach((async(t,e,s)=>{const a=m.A.get("authToken"),i=["/","/academic/login"];if(!i.includes(t.path)&&!a)return s("/academic/login");const l=await g.A.post("/login/token",{save:!1},{headers:{"x-user-token":a}});if(!i.includes(t.path)&&!l.data.userInfo)return m.A.remove("authToken"),s("/academic/login"),void location.reload();if(t.fullPath.includes("teacherInfo"))return l.data.userInfo&&"teacher"==l.data.userInfo.typeEng?s():(m.A.remove("authToken"),s("/academic/login"),void location.reload());if(t.fullPath.includes("studentInfo")){if(!l.data.userInfo||"student"!=l.data.userInfo.typeEng)return m.A.remove("authToken"),s("/academic/login"),void location.reload();s()}return s()}));var Jt=Gt,Wt=s(4927),Xt=s.n(Wt);a["default"].config.productionTip=!1,a["default"].use(Xt()),new a["default"]({render:t=>t(d),router:Jt,beforeCreate(){a["default"].prototype.$bus=this}}).$mount("#app")}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var l=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(l.exports,l,l.exports,s),l.loaded=!0,l.exports}s.m=t,function(){s.amdO={}}(),function(){var t=[];s.O=function(e,a,i,l){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],l=t[d][2];for(var r=!0,n=0;n<a.length;n++)(!1&l||o>=l)&&Object.keys(s.O).every((function(t){return s.O[t](a[n])}))?a.splice(n--,1):(r=!1,l<o&&(o=l));if(r){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}l=l||0;for(var d=t.length;d>0&&t[d-1][2]>l;d--)t[d]=t[d-1];t[d]=[a,i,l]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,l,o=a[0],r=a[1],n=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(n)var d=n(s)}for(e&&e(a);c<o.length;c++)l=o[c],s.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return s.O(d)},a=self["webpackChunkskyAcademy"]=self["webpackChunkskyAcademy"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(1604)}));a=s.O(a)})();
//# sourceMappingURL=app.df0cb57d.js.map